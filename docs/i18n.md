# Internationalization (i18n) Guide

## Setup

- **Library:** i18next + react-i18next + expo-localization
- **Supported languages:** Korean (`ko`), English (`en`)
- **Default:** System locale (fallback: `en`)
- **Config:** `src/i18n/index.ts`

## Namespace Structure

There are 10 namespaces, each with a JSON file per language:

| Namespace | File | Scope |
|-----------|------|-------|
| `common` | `common.json` | Tabs, sidebar, actions, dates, placeholders, labels |
| `dashboard` | `dashboard.json` | Greeting, streak, level, badges, stats, quick actions |
| `timeline` | `timeline.json` | Empty states for timeline |
| `entry` | `entry.json` | Entry creation, editing, detail screen |
| `summary` | `summary.json` | Daily/weekly summary, evidence |
| `todos` | `todos.json` | Todo list, filters, evidence |
| `auth` | `auth.json` | Login, signup forms |
| `gamification` | `gamification.json` | Levels, badges, check-in questions |
| `settings` | `settings.json` | Language, theme, account, privacy section |
| `privacy` | `privacy.json` | Privacy notice title, body, acknowledge button |

Files live at: `src/i18n/locales/{ko,en}/<namespace>.json`

## Usage in Components

```tsx
import { useTranslation } from 'react-i18next'

function MyComponent() {
  const { t } = useTranslation('dashboard')         // single namespace
  const { t: tCommon } = useTranslation('common')    // alias for second namespace

  return <Text>{t('greeting.morning')}</Text>         // namespace-scoped key
}
```

## Usage in Non-Component Code (stores, constants)

```tsx
import i18n from '@/i18n'

// Direct call (works outside React components)
const text = i18n.t('gamification:badges.first_entry.title')

// With namespace prefix: 'namespace:key'
const questions = i18n.t('gamification:checkin.morning', { returnObjects: true })
```

## Interpolation

```json
// JSON: "minutesAgo": "{{count}}m ago"
t('date.minutesAgo', { count: 5 })  // â†’ "5m ago"
```

## Arrays

```json
// JSON: "dayNames": ["Sun", "Mon", "Tue", ...]
const days = t('date.dayNames', { returnObjects: true }) as string[]
```

## Adding a New Translation Key

1. Add the key to both `ko` and `en` JSON files for the appropriate namespace
2. If creating a new namespace:
   - Create `src/i18n/locales/ko/<name>.json` and `src/i18n/locales/en/<name>.json`
   - Import in `src/i18n/index.ts`
   - Add to the `ns` array and both `resources.ko` / `resources.en`

## Language Switching

The user can switch languages in Settings. The flow:

1. User taps language option (system/ko/en)
2. `settingsStore.setLanguage()` is called
3. Store persists to AsyncStorage and calls `i18n.changeLanguage()`
4. All components using `useTranslation()` re-render automatically
5. `null` language = follow system locale (detected via `expo-localization`)

## Conventions

- **No hardcoded user-facing strings in .tsx files.** Everything goes through `t()`.
- **Namespace keys follow dot notation:** `section.subsection.key`
- **Use the most specific namespace:** Don't put todo strings in `common`.
- **`common` namespace** is for truly shared UI: tab labels, action buttons, date formatting, placeholders.
