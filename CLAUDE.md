# AI 일기장 (가칭: ReflectLog)

## 프로젝트 개요
- **한 줄 설명**: 내가 쓴 기록을 바탕으로, AI가 '근거 링크'가 있는 회고를 대신 정리해주는 저널
- **목표**: 투자 심사용 MVP (D-Day: 2026-02-19)
- **데모 시나리오**: "오늘 기록(3분) → 자동 정리 → 일간 요약 → 주간 회고" 3~5분 시연

## 핵심 문제 (해결하려는 것)
1. 쓰는 행위 자체가 귀찮아서 기록이 끊김
2. 기록은 쌓이는데 돌아보지 않아 성장으로 연결 안 됨
3. 회고하려면 뭘 봐야 할지 모르겠음

## 타겟 사용자
- 매일 업무 로그를 남기는 바쁜 지식 노동자
- 목표: 하루 3분 기록 + 주간 10분 회고

---

## MVP 범위 (Do / Don't)

### ✅ 반드시 구현 (Do)
1. **빠른 입력**: 텍스트 중심 웹 입력
2. **대화형 작성**: 챗봇 질문(아침/저녁 체크인)으로 Entry 생성
3. **자동 정리**: 날짜/프로젝트/사람/이슈 태깅 (반자동 OK)
4. **일간 요약**: AI 생성 + 근거 링크
5. **주간 회고**: 핵심 3~5개 요약 + 근거 링크
6. **근거 연결**: 요약 클릭 시 원문 Entry로 이동
7. **To-do 제안**: 기록 기반 다음 액션 자동 추출 (간단 버전)

### ❌ 이번엔 안 함 (Don't)
- 소셜/공유/팔로우
- 의사결정 로그 (옵션/근거/결과 추적)
- 감정/정신건강 진단
- 캘린더/슬랙 연동
- 백그라운드 활동 자동 수집 (금지)

### ⏳ 나중에 (Later)
- 모바일 앱 + 음성 입력
- To-do/다음 액션 제안
- 외부 연동 (캘린더, 슬랙, 노션)

---

## 기술 스택
- **Frontend**: Next.js 14 (App Router) + TypeScript + Tailwind CSS
- **Backend**: Next.js API Routes (또는 Supabase Edge Functions)
- **Database**: Supabase (PostgreSQL)
- **Auth**: Supabase Auth (이메일/소셜 간단히)
- **AI**: OpenAI API (GPT-4o) - 요약/태깅용
- **배포**: Vercel (웹) + 안드로이드 래퍼 (Capacitor 또는 TWA)

---

## 데이터 모델

```typescript
// Entry (기록)
interface Entry {
  id: string;
  user_id: string;
  date: string;           // YYYY-MM-DD
  raw_text: string;
  tags: string[];         // ["프로젝트:A", "사람:김대리", "이슈:버그"]
  created_at: timestamp;
}

// Summary (요약)
interface Summary {
  id: string;
  user_id: string;
  period: 'daily' | 'weekly';
  period_start: string;   // YYYY-MM-DD
  text: string;
  entry_links: string[];  // Entry IDs
  created_at: timestamp;
}

// Todo (할 일)
interface Todo {
  id: string;
  user_id: string;
  text: string;
  source_entry_id: string;  // 이 할 일이 추출된 Entry
  status: 'pending' | 'done';
  due_date?: string;        // YYYY-MM-DD (선택)
  created_at: timestamp;
}
```

---

## 화면 구성 (6개)

1. **기록 화면** - 챗봇 형태 질문 + 텍스트 입력
2. **태그 확인** - 자동 태깅 결과 보여주기 (수정 가능)
3. **일간 요약** - 오늘의 요약 + 근거 링크 목록
4. **주간 회고** - 한 주 핵심 3~5개 + 근거 링크
5. **To-do 리스트** - AI 추출 할 일 + 완료 체크 + 근거 Entry 링크
6. **타임라인** - Entry 리스트 (날짜별)

---

## 핵심 설계 원칙

1. **입력은 가볍게, 회고는 가치있게** - 3분 안에 기록 완료
2. **근거 기반** - 모든 요약은 원문으로 돌아갈 수 있어야 함
3. **거부감 최소화** - AI가 감시/관리하는 느낌 금지, 도우미 톤 유지

---

## 코딩 컨벤션

- 컴포넌트: `PascalCase`, 함수형 + hooks
- 파일: feature 기반 폴더 (`/features/entry`, `/features/summary`)
- API: `/api/entries`, `/api/summaries` RESTful
- 상태관리: React Query (서버 상태) + Zustand (클라이언트)
- 에러 처리: 데모용이므로 happy path 우선, 최소한의 toast 에러

---

## 진행 상황 체크리스트

### Phase 1: 기본 구조 (D3-D6)
- [x] 프로젝트 초기 설정 (Next.js + Supabase)
- [x] 인증 (이메일 로그인)
- [x] Entry CRUD API
- [x] Entry 작성 UI (챗봇 형태)
- [x] Entry 리스트/상세 UI
- [x] 자동 태깅 (AI 호출)

### Phase 2: 일간 요약 + To-do (D7-D9)
- [x] 일간 요약 생성 API (AI)
- [x] 근거 링크 저장 로직
- [x] 일간 요약 화면 + 링크 클릭 → Entry 이동
- [x] To-do 추출 API (Entry 저장 시 자동 실행)
- [x] To-do 리스트 UI (완료 체크, 근거 Entry 링크)

### Phase 3: 주간 회고 (D10-D12)
- [x] 주간 회고 생성 API
- [x] 주간 화면 UI
- [x] 근거 링크 표시

### Phase 4: 폴리시 (D13-D15)
- [ ] 내보내기 (Markdown)
- [ ] UX 다듬기
- [ ] 에러/재생성 처리

### Phase 5: 제출 준비 (D16-D18)
- [ ] 안드로이드 래퍼
- [ ] 데모 데이터 시딩
- [ ] 데모 영상 촬영
- [ ] 제출 패키지

---

## AI 프롬프트 가이드

### 체크인 질문 (Entry 작성 유도)
```
아침: "오늘 가장 중요한 일은 뭔가요?"
저녁: "오늘 어떤 일이 있었나요? 잘된 것과 아쉬운 것이 있다면?"
```

### 태깅 프롬프트
```
다음 기록에서 프로젝트명, 사람 이름, 주요 이슈를 추출해주세요.
JSON 형식: { "projects": [], "people": [], "issues": [] }
```

### 일간 요약 프롬프트
```
다음은 오늘 하루의 기록입니다. 3문장 이내로 요약하고,
각 문장이 어떤 기록(Entry ID)에서 나왔는지 표시해주세요.
```

### To-do 추출 프롬프트
```
다음 기록에서 해야 할 일(action item)을 추출해주세요.
- "~해야 한다", "~할 예정", "~하기로 했다" 등의 표현에서 추출
- 이미 완료된 일은 제외
- JSON 형식: { "todos": [{ "text": "할 일 내용", "due_hint": "마감 힌트 (있으면)" }] }
```

---

## 주의사항

- 데모용이므로 완벽한 에러 처리보다 **핵심 플로우 우선**
- 하드코딩 허용 (데모 데이터, 프롬프트 등)
- UI는 심플하지만 **신뢰감 있게** (깔끔한 타이포, 여백)
- "AI가 감시한다" 느낌 절대 금지 → 친근한 도우미 톤

---

## 와우 포인트 (데모 핵심)
> "3분 기록 → 주간 회고가 '읽을 가치'로 변환되는 순간"
> 근거 링크를 클릭하면 원문이 바로 보이는 신뢰감

---

## 참고 자료
- 실행 준비 문서: `/docs/실행_준비_문서.pdf`

---

## 🔄 개발 피드백 가이드

이 문서는 개발 과정에서 지속적으로 업데이트됩니다. Claude Code와 협업 시 아래 패턴을 활용하세요.

### 문서 업데이트 요청 예시
```bash
# 기능 완료 시
"[기능명] 완료. 체크리스트 업데이트해줘"

# 설계 변경 시
"[변경 내용] 반영해서 CLAUDE.md 수정해줘"

# 버그/삽질 기록
"[이슈 내용] 주의사항에 추가해줘"

# 새로운 결정
"[결정 내용] 결정 로그에 추가해줘"
```

### 피드백 루프 원칙
1. **작은 단위로 자주** - 큰 기능 완료 후보다 작은 단위로 문서 동기화
2. **삽질은 바로 기록** - 같은 실수 반복 방지
3. **왜(Why) 기록** - 무엇을 했는지보다 왜 그렇게 결정했는지가 중요
4. **체크리스트 실시간 반영** - 진행 상황 한눈에 파악

---

## 📋 결정 로그

| 날짜 | 결정 사항 | 이유 | 대안 (기각) |
|------|----------|------|-------------|
| 2026-02-02 | To-do 기능 MVP 포함 | 데모 임팩트 강화, 실용성 어필 | 후순위로 미루기 |
| | | | |

---

## ⚠️ 삽질 노트 / 주의사항

개발 중 발견한 이슈와 해결책을 기록합니다.

```
[예시]
- Supabase RLS: 테이블 생성 후 RLS 정책 반드시 설정할 것
- Next.js App Router: 'use client' 빠뜨리면 hooks 에러
- OpenAI API: 응답 형식 JSON 강제하려면 response_format 설정 필요
```

---

## 📝 변경 로그

| 날짜 | 버전 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| 2026-02-02 | v0.1 | 초기 문서 작성 | Claude |
| 2026-02-02 | v0.2 | To-do 기능 MVP 범위 추가 | Claude |
| 2026-02-02 | v0.3 | 피드백 가이드, 결정 로그, 삽질 노트 섹션 추가 | Claude |
| | | | |
